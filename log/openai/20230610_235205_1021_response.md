- Model      : gpt-4
- Temperature: 0.2
- Tokens     : 1021
- Duration   : 23.854318857192993


# ASSISTANT:
```python
import os
import ast
import json


def get_functions(file_path):
    with open(file_path, "r") as source_code:
        tree = ast.parse(source_code.read())
        functions = [node.name for node in ast.walk(tree) if isinstance(node, ast.FunctionDef)]
    return functions


def scan_directory(path):
    directory_data = {}
    for root, dirs, files in os.walk(path):
        for file in files:
            if file.endswith('.py'):
                file_path = os.path.join(root, file)
                relative_path = os.path.relpath(file_path, path)
                directory_data[relative_path] = get_functions(file_path)
    return directory_data


def main():
    folder_name = "/Users/km1/2code/python-projects/Coding_ChatBot_Assistant/"
    data = scan_directory(folder_name)
    final_data = {folder_name: data}
    with open('output.json', 'w') as json_file:
        json.dump(final_data, json_file, indent=4)


if __name__ == "__main__":
    main()
```
This updated code will generate the expected JSON format. The main change is in the `scan_directory` function, where I added a line to calculate the relative path of the file with respect to the given folder path. Then, in the `main` function, I wrapped the scanned data in a dictionary with the folder name as the key.

