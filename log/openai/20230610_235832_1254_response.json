{
  "id": "chatcmpl-7PzwnWDgLTD2HjLLaLpEPexcp5TgI",
  "object": "chat.completion",
  "created": 1686430681,
  "model": "gpt-4-0314",
  "usage": {
    "prompt_tokens": 969,
    "completion_tokens": 285,
    "total_tokens": 1254
  },
  "choices": [
    {
      "message": {
        "role": "assistant",
        "content": "Here's the updated code to generate the expected JSON format:\n\n```python\nimport os\nimport ast\nimport json\n\n\ndef get_functions(file_path):\n    with open(file_path, \"r\") as source_code:\n        tree = ast.parse(source_code.read())\n        functions = [node.name for node in ast.walk(tree) if isinstance(node, ast.FunctionDef)]\n    return functions\n\n\ndef scan_directory(path):\n    directory_data = {}\n    for root, dirs, files in os.walk(path):\n        for file in files:\n            if file.endswith('.py'):\n                file_path = os.path.join(root, file)\n                folder = os.path.dirname(file_path)\n                if folder not in directory_data:\n                    directory_data[folder] = {}\n                directory_data[folder][file] = {\"list-of-functions\": get_functions(file_path)}\n    return directory_data\n\n\ndef main():\n    folder_name = \"/Users/km1/2code/python-projects/Coding_ChatBot_Assistant/\"\n    data = scan_directory(folder_name)\n    with open('output.json', 'w') as json_file:\n        json.dump(data, json_file, indent=4)\n\n\nif __name__ == \"__main__\":\n    main()\n```\n\nThis code will generate the JSON in the format you expect, with the folder name as the first key, the file name as the second key, and \"list-of-functions\" as the third key."
      },
      "finish_reason": "stop",
      "index": 0
    }
  ]
}